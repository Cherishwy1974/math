
# 📋 **虚拟实验室需求规范**

### 一、**目标用户定位**

* **高职学生** （非数学专业）
* 数学基础：高中水平，了解基本函数和运算
* 学习特点：偏向实践应用，抽象思维能力有限
* 教学目标：理解概念、掌握计算、解决实际问题

### 二、**样式规范**

#### **布局结构**

```
┌─────────────────────────────────────┐
│         标题栏 (40px)                │
├────┬────────────────────────────────┤
│侧边│      左栏     │      右栏       │
│导航│    (内容区)   │    (可视化)     │
│120px│              │                 │
└────┴────────────────────────────────┘
```

#### **具体要求**

* **容器尺寸** ：最大宽度1400px，最大高度700px（宽高比约2:1）
* **侧边栏** ：固定120px宽度，3-4个导航按钮
* **内容区** ：左右两栏等分，间隙16-20px
* **卡片内边距** ：12px（紧凑布局）
* **滚动条** ：功能正常但视觉隐藏

#### **颜色系统**

```css
--primary: #4f46e5;     /* 主色调 */
--success: #10b981;     /* 成功/正确 */
--danger: #ef4444;      /* 错误/警告 */
--warning: #f59e0b;     /* 提示信息 */
--gray系列: 背景和边框
```

#### **字号规范**

* 标题h1: 22px（仅用于顶部标题栏）
* 标题h3: 18px（卡片标题）
* 按钮: 16px
* 正文: 16px
* 公式: 20px（居中显示）

### 三、**内容要求**

#### **语言规范**

| 避免使用       | 应该使用       |
| -------------- | -------------- |
| 符号的严格定义 | 高职规范语言   |
|                |                |
| ∀ε>0, ∃N    | 无论多小的误差 |
|                |                |

#### **公式格式**

* 极限符号：`$\lim\limits_{x \to a}$`（下标格式）
* **公式必须与文字同行**，避免单独占行占用空间
* 减少公式推导，重点展示结果
* 复杂公式可适当换行，但优先考虑空间利用

**公式排版示例**：
```html
<!-- 推荐：公式与文字同行 -->
<div class="info-box">当 x → 0 时，$\sin x \sim x$</div>
<div class="steps">计算极限：$\lim\limits_{x \to 0} \frac{\sin x}{x} = 1$</div>

<!-- 避免：公式单独占行 -->
<div class="formula-box">
    $\lim\limits_{x \to 0} \frac{\sin x}{x} = 1$
</div>
```

#### **必备元素**

1. **可视化图表** （Canvas绘制）
2. **数值计算表格**
3. **动画演示按钮**
4. **参数调节滑块**
5. **实例对比展示**

### 四、**功能规范**

#### **交互功能**

* **滑块调节** ：实时更新图像和数值
* **按钮选择** ：切换不同函数或案例
* **动画控制** ：开始/暂停/重置
* **数值输入** ：计算具体结果

#### **可视化要求**

* 坐标系清晰，有网格辅助
* 曲线平滑，颜色区分
* 动画流畅，速度可调
* 标记关键点和区域

### 五、**教学设计**

#### **内容组织**

1. **基础概念** ：用图形和实例引入
2. **动手实践** ：调节参数观察变化
3. **计算练习** ：提供题目和答案
4. **应用场景** ：结合实际问题

#### **难度控制**

* ❌  **不要** ：严格定义、逻辑证明、抽象推导
* ✅  **要有** ：直观图像、数值计算、规律总结、实际应用

### 六、**技术实现**

#### **必需组件**

```javascript
// MathJax - 数学公式渲染
window.MathJax = {
    tex: { inlineMath: [['$', '$']] }
};

// Canvas - 图形绘制
const ctx = canvas.getContext('2d');

// 响应式适配
@media (max-width: 768px) {
    // 移动端布局调整
}
```

#### **性能优化**

* 防抖处理窗口resize事件
* 延迟加载MathJax
* Canvas智能缩放适配容器

### 七、**典型页面结构**

```html
<!-- 每个功能模块 -->
<div class="content" id="模块名">
    <div class="column"> <!-- 左栏：控制和说明 -->
        <div class="card">
            <h3>标题</h3>
            <div class="formula-box">核心公式</div>
            <div class="steps">操作步骤</div>
            <button class="btn">交互按钮</button>
        </div>
    </div>
    <div class="column"> <!-- 右栏：可视化 -->
        <div class="card">
            <h3>图像展示</h3>
            <div class="canvas-container">
                <canvas></canvas>
            </div>
            <div class="info-box">结果显示</div>
        </div>
    </div>
</div>
```

### 八、**质量标准**

✅  **合格的实验室应该** ：

1. 一看就懂（无需数学基础）
2. 一动就会（交互直观）

❌  **避免出现** ：

1. 大段理论推导
2. 复杂数学符号
3. 抽象概念解释
4. 脱离实际应用

### 九、**实际案例要求**

每个实验室必须包含：

* **动画演示** （展示变化过程）

### 十、**常见问题修复经验**

#### **MathJax 公式渲染问题**

**问题模式**：HTML 下拉框（`<select>` 和 `<option>`）中的 MathJax 公式无法正确渲染

**解决方案**：
```html
<!-- 错误做法 -->
<select>
    <option value="1">函数 $\frac{x^2-4}{x-2}$</option>
</select>

<!-- 正确做法 -->
<select id="funcSelect" onchange="updateFunction()">
    <option value="1">有理函数 (x²-4)/(x-2)</option>
</select>
<div class="formula-box" id="selectedFunction">$f(x) = \frac{x^2-4}{x-2}$</div>
```

```javascript
function updateFunction() {
    const formulas = {
        '1': '$f(x) = \\frac{x^2-4}{x-2}$',
        '2': '$f(x) = \\sin x$'
    };
    document.getElementById('selectedFunction').innerHTML = formulas[func];
    renderMath();
}
```

#### **Canvas 图像标准化**

**问题模式**：数学函数图像缺少标准坐标轴、刻度标记、标签

**标准修复**：
```javascript
// 绘制坐标轴
ctx.strokeStyle = '#374151';
ctx.lineWidth = 2;
ctx.beginPath();
ctx.moveTo(50, height - 40);
ctx.lineTo(width - 30, height - 40);
ctx.moveTo(50, 30);
ctx.lineTo(50, height - 40);
ctx.stroke();

// 绘制刻度
ctx.strokeStyle = '#6b7280';
ctx.lineWidth = 1;
ctx.font = '10px Arial';
for(let i = -3; i <= 3; i++) {
    if(i === 0) continue;
    const px = width/2 + i * 50;
    ctx.beginPath();
    ctx.moveTo(px, height - 40 - 5);
    ctx.lineTo(px, height - 40 + 5);
    ctx.stroke();
    ctx.fillText(i.toString(), px - 5, height - 40 + 20);
}

// 坐标轴标签
ctx.font = '14px Arial';
ctx.fillText('x', width - 20, height - 40 + 20);
ctx.fillText('y', 50 - 20, 40);
```

#### **函数间断点处理**

**标准做法**：用空心圆标记不连续点
```javascript
// 标记极限点（空心圆表示不连续）
ctx.strokeStyle = '#10b981';
ctx.lineWidth = 3;
ctx.beginPath();
ctx.arc(x, y, 6, 0, Math.PI * 2);
ctx.stroke(); // 不填充，只描边
```

#### **文件命名和标题一致性**

**检查要点**：
1. index.html 中的实验室标题与实际内容匹配
2. 实验室内部标题与功能描述一致
3. 避免"第一"、"第二"等限定词，除非确实只包含单一内容

#### **代码修复最佳实践**

1. **先识别问题模式**，再制定通用解决方案
2. **保持代码风格一致性**（颜色、字体、间距）
3. **修复后立即检查语法错误**
4. **确保功能完整性不受影响**
5. **数学概念必须严谨准确**
6. **公式排版优化**：优先公式与文字同行，避免单独占行浪费空间

### 十一、**质量检查清单**

#### **公式渲染检查**
- [ ] 所有 MathJax 公式正确显示
- [ ] 下拉框中的公式在独立区域渲染
- [ ] 公式与文字对齐美观
- [ ] 公式与文字同行，避免单独占行浪费空间
- [ ] 复杂公式优先考虑空间利用，必要时才换行

#### **图像标准化检查**
- [ ] 坐标轴完整（x轴、y轴）
- [ ] 刻度标记清晰（数值标签）
- [ ] 坐标轴标签（x、y）
- [ ] 函数间断点正确标记
- [ ] 极限线用虚线表示

#### **交互功能检查**
- [ ] 滑块调节实时更新
- [ ] 按钮切换功能正常
- [ ] 动画控制流畅
- [ ] 数值计算准确

#### **内容一致性检查**
- [ ] 标题与实际内容匹配
- [ ] 数学概念表述准确
- [ ] 语言符合高职学生水平
- [ ] 实例贴近实际应用

这样的实验室设计既保证了 **教学效果** ，又符合 **高职学生认知特点** ，通过**可视化和交互**降低学习门槛，让抽象的数学概念变得直观易懂。
